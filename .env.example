# Environment Configuration
NODE_ENV=development
PORT=5000

# Frontend Configuration
FRONTEND_URL=http://localhost:3000

# Database Configuration
# Connect to Supabase via connection pooling
DATABASE_URL="postgresql://postgres.ftihjzudufdjjabnpaqv:Amoria@2025@aws-1-eu-north-1.pooler.supabase.com:6543/postgres?pgbouncer=true"

# Direct connection to the database. Used for migrations
DIRECT_URL="postgresql://postgres.ftihjzudufdjjabnpaqv:Amoria@2025@aws-1-eu-north-1.pooler.supabase.com:5432/postgres"

# Google OAuth Configuration
GOOGLE_CLIENT_ID=739960680632-g75378et3hgeu5qmukdqp8085369gh1t.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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
GOOGLE_REDIRECT_URI=http://localhost:3000/api/auth/google/callback

# Apple OAuth Configuration
APPLE_CLIENT_ID=com.jambolush.signin
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_APPLE_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----"
APPLE_REDIRECT_URI=http://localhost:3000/api/auth/apple/callback

# Email Configuration (Using Brevo)
BREVO_API_KEY=your-brevo-api-key-here
BREVO_SENDER_EMAIL=noreply@jambolush.com
FROM_EMAIL=noreply@jambolush.com
EMAIL_PROVIDER=brevo

# Security Configuration
BCRYPT_ROUNDS=12
SESSION_TIMEOUT_MINUTES=60

# JWT Configuration
JWT_SECRET="ec07c6277623b1a798f2876399765ae4d465451d94bd45de7913a7eee785e0f7f0d466ff4cbdf916243317795ce34c57c907e0db57b197050abaa861499852c6"
JWT_EXPIRES_IN="24h"

# ==============================================
# PAWAPAY PAYMENT GATEWAY CONFIGURATION
# ==============================================

# --- CORE PAWAPAY SETTINGS ---
PAWAPAY_API_TOKEN="eyJraWQiOiIxIiwiYWxnIjoiRVMyNTYifQ.eyJ0dCI6IkFBVCIsInN1YiI6IjEwNjU1IiwibWF2IjoiMSIsImV4cCI6MjA3MzYyNDU0NywiaWF0IjoxNzU4MDkxNzQ3LCJwbSI6IkRBRixQQUYiLCJqdGkiOiIxMTIzMzY2NS03NTAzLTRmMjItYjY0Ni1kYWYwNWFkMjllNDUifQ.l4_48HEdUqLfOQ5JNB5jpjsJzNSd41Jg3zk4N-ndfWoPajIieSXwWge0dqMbAXTUEq-2veuCyNy9_t5mJqMvaQ"
PAWAPAY_MERCHANT_ID="your-merchant-id"
PAWAPAY_ENVIRONMENT="sandbox"                    # sandbox | production
PAWAPAY_BASE_URL="https://api.sandbox.pawapay.io"  # Will auto-switch to production URL when environment is production

# --- CALLBACK & WEBHOOK CONFIGURATION ---
PAWAPAY_CALLBACK_URL="https://jambolush.com/api/payments/webhook/pawapay"
PAWAPAY_RETURN_URL="https://jambolush.com/payment/success"
PAWAPAY_CANCEL_URL="https://jambolush.com/payment/cancelled"
PAWAPAY_WEBHOOK_SECRET="your-webhook-secret-key"

# --- SECURITY SETTINGS (OPTIONAL BUT RECOMMENDED) ---
PAWAPAY_ENABLE_SIGNED_REQUESTS="true"
PAWAPAY_ENABLE_SIGNED_CALLBACKS="true"
PAWAPAY_PRIVATE_KEY="your-private-key-for-signing-requests"
PAWAPAY_PUBLIC_KEY="your-public-key-for-verifying-callbacks"
PAWAPAY_KEY_ID="MERCHANT_JAMBOLUSH_KEY"

# --- SUPPORTED CURRENCIES ---
PAWAPAY_DEFAULT_CURRENCY="KES"
PAWAPAY_SUPPORTED_CURRENCIES="KES,UGX,TZS,RWF,GHS,ZMW,XOF,XAF,MWK,BWP,SZL,ZAR"

# --- TRANSACTION LIMITS ---
PAWAPAY_MIN_AMOUNT="1"
PAWAPAY_MAX_AMOUNT="1000000"
PAWAPAY_DAILY_LIMIT="500000"
PAWAPAY_MONTHLY_LIMIT="5000000"

# --- RATE LIMITING ---
PAWAPAY_DEPOSITS_PER_MINUTE="60"
PAWAPAY_PAYOUTS_PER_MINUTE="30"
PAWAPAY_STATUS_CHECKS_PER_MINUTE="120"

# --- PAYMENT FEES (BASED ON YOUR AGREEMENT WITH PAWAPAY) ---
PAWAPAY_DEPOSIT_FEE_RATE="1.5"                  # 1.5%
PAWAPAY_DEPOSIT_MIN_FEE="5"                     # KES 5 minimum
PAWAPAY_DEPOSIT_MAX_FEE="500"                   # KES 500 maximum
PAWAPAY_PAYOUT_FEE_RATE="2.0"                  # 2.0%
PAWAPAY_PAYOUT_MIN_FEE="10"                     # KES 10 minimum
PAWAPAY_PAYOUT_MAX_FEE="1000"                   # KES 1000 maximum
PAWAPAY_REFUND_FEE="25"                         # KES 25 fixed refund fee

# --- TIMEOUT SETTINGS ---
PAWAPAY_TIMEOUT="30000"                         # 30 seconds API timeout
PAWAPAY_RETRY_ATTEMPTS="3"

# --- FEATURE FLAGS ---
PAWAPAY_ENABLE_DEPOSITS="true"
PAWAPAY_ENABLE_PAYOUTS="true"
PAWAPAY_ENABLE_REFUNDS="true"
PAWAPAY_ENABLE_BULK_PAYOUTS="true"
PAWAPAY_ENABLE_PAYMENT_WIDGET="true"
PAWAPAY_ENABLE_STATUS_POLLING="true"

# --- WEBHOOK SECURITY ---
PAWAPAY_WEBHOOK_IPS="52.31.127.218,52.49.173.169,52.210.250.74"  # PawaPay webhook IPs

# ==============================================
# PAYMENT SYSTEM CONFIGURATION
# ==============================================

# --- STATEMENT DESCRIPTION ---
PAYMENT_STATEMENT_PREFIX="JAMBOLUSH"

# --- GENERAL PAYMENT SETTINGS ---
ENABLE_PAYMENTS="true"
ENABLE_MOBILE_MONEY_DEPOSITS="true"
ENABLE_PAYOUTS="true"
ENABLE_REFUNDS="true"
ENABLE_BULK_OPERATIONS="true"
ENABLE_PAYMENT_WIDGET="true"
ENABLE_RECURRING_PAYMENTS="true"
ENABLE_MULTI_CURRENCY="true"
ENABLE_PAYMENT_ANALYTICS="true"
ENABLE_FRAUD_PREVENTION="true"
ENABLE_ADVANCED_REPORTING="true"

# ==============================================
# NOTIFICATION SERVICES
# ==============================================

# --- SMS CONFIGURATION (FOR AFRICAN MARKETS) ---
SMS_PROVIDER="africastalking"                   # africastalking | twilio | infobip
SMS_API_KEY="your-sms-api-key"
SMS_USERNAME="your-sms-username"
SMS_FROM="JAMBOLUSH"
SMS_NOTIFICATIONS_ENABLED="true"

# --- ALTERNATIVE SMS PROVIDERS ---
# TWILIO_ACCOUNT_SID="your-twilio-account-sid"
# TWILIO_AUTH_TOKEN="your-twilio-auth-token"
# TWILIO_FROM_NUMBER="+1234567890"

# --- PUSH NOTIFICATION CONFIGURATION ---
FCM_SERVER_KEY="your-fcm-server-key"
PUSH_NOTIFICATIONS_ENABLED="true"

# --- NOTIFICATION PREFERENCES ---
PAYMENT_EMAIL_NOTIFICATIONS="true"
PAYMENT_SMS_NOTIFICATIONS="true"
PAYMENT_PUSH_NOTIFICATIONS="true"
PAYMENT_WEBHOOK_NOTIFICATIONS="true"

# ==============================================
# RATE LIMITING & SECURITY
# ==============================================

# --- GENERAL RATE LIMITING ---
RATE_LIMIT_WINDOW_MS="900000"                   # 15 minutes
RATE_LIMIT_MAX_REQUESTS="100"

# --- PAYMENT-SPECIFIC RATE LIMITING ---
PAYMENT_RATE_LIMIT_WINDOW_MS="60000"           # 1 minute
PAYMENT_RATE_LIMIT_MAX_REQUESTS="10"

# --- SECURITY SETTINGS ---
ENCRYPTION_KEY="your-encryption-key-change-in-production"
SESSION_SECRET="your-session-secret"
TRUSTED_IPS="127.0.0.1,::1"
BLOCK_SUSPICIOUS_IPS="true"
VALIDATE_REQUEST_SIGNATURES="true"
ENFORCE_HTTPS="true"

# --- WEBHOOK SECURITY ---
WEBHOOK_TIMEOUT="30000"
WEBHOOK_RETRY_ATTEMPTS="3"
WEBHOOK_VERIFY_SIGNATURES="true"
WEBHOOK_ENABLE_LOGGING="true"

# ==============================================
# BACKGROUND JOBS & REDIS
# ==============================================

# --- REDIS CONFIGURATION ---
REDIS_URL="redis://localhost:6379"
ENABLE_PAYMENT_JOBS="true"
JOB_CONCURRENCY="5"

# --- JOB SCHEDULES (CRON FORMAT) ---
STATUS_POLLING_SCHEDULE="0 */2 * * * *"                    # Every 2 minutes
TRANSACTION_RECONCILIATION_SCHEDULE="0 0 */6 * * *"        # Every 6 hours
ACTIVE_CONFIG_REFRESH_SCHEDULE="0 0 */12 * * *"            # Every 12 hours
FAILED_CALLBACK_RETRY_SCHEDULE="0 */5 * * * *"             # Every 5 minutes
PAYMENT_METRICS_UPDATE_SCHEDULE="0 */10 * * * *"           # Every 10 minutes

# ==============================================
# ANALYTICS & MONITORING
# ==============================================

# --- ANALYTICS CONFIGURATION ---
ENABLE_PAYMENT_ANALYTICS="true"
ANALYTICS_RETENTION_DAYS="90"
TRACK_PAYMENT_EVENTS="true"
TRACK_USER_BEHAVIOR="true"

# --- THIRD-PARTY INTEGRATIONS ---
GOOGLE_ANALYTICS_ID="GA-XXXXXXXXX"
MIXPANEL_TOKEN="your-mixpanel-token"
SENTRY_DSN="your-sentry-dsn"

# ==============================================
# LOGGING CONFIGURATION
# ==============================================

# --- LOG SETTINGS ---
LOG_LEVEL="info"
ENABLE_PAYMENT_LOGS="true"
LOG_WEBHOOKS="true"
LOG_SENSITIVE_DATA="false"                       # Set to true only in development
LOG_TO_FILE="true"
LOG_PATH="./logs"
MAX_LOG_FILES="14"                               # 2 weeks retention
MAX_LOG_SIZE="20m"                               # 20MB max file size

# ==============================================
# REGIONAL & LOCALIZATION
# ==============================================

# --- REGIONAL SETTINGS ---
DEFAULT_TIMEZONE="Africa/Nairobi"
DEFAULT_LOCALE="en-KE"
SUPPORTED_LOCALES="en-KE,sw-KE,en-UG,en-TZ,en-RW,fr-RW,en-GH,en-ZM"

# --- COMPLIANCE ---
DATA_RESIDENCY="africa"
GDPR_COMPLIANCE="true"
LOCAL_REGULATIONS_COMPLIANCE="true"

# ==============================================
# CURRENCY & EXCHANGE RATES
# ==============================================

# --- CURRENCY CONFIGURATION ---
DEFAULT_CURRENCY="KES"
EXCHANGE_RATE_API_KEY="your-exchange-rate-api-key"

# ==============================================
# FILE UPLOAD (FOR TRANSACTION RECEIPTS)
# ==============================================

# --- FILE UPLOAD SETTINGS ---
MAX_FILE_SIZE="5242880"                         # 5MB
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/pdf,text/plain"
UPLOAD_PATH="./uploads"
CLOUD_PROVIDER="local"                          # local | aws | cloudinary

# --- CLOUDINARY CONFIGURATION (OPTIONAL) ---
# CLOUDINARY_CLOUD_NAME="your-cloud-name"
# CLOUDINARY_API_KEY="your-api-key"
# CLOUDINARY_API_SECRET="your-api-secret"

# ==============================================
# DEVELOPMENT & TESTING
# ==============================================

# --- DEVELOPMENT SETTINGS ---
ENABLE_SWAGGER="true"
ENABLE_CORS="true"
CORS_ORIGIN="http://localhost:3001,http://localhost:3000,http://localhost:8080"

# --- TESTING CONFIGURATION ---
MOCK_PAYMENTS="false"                           # Set to true for testing without real API calls
SKIP_WEBHOOK_VERIFICATION="false"               # Only set to true in development
ENABLE_DEBUG_LOGS="true"

# --- TEST PHONE NUMBERS (PAWAPAY SANDBOX) ---
TEST_PHONE_NUMBERS="260763456789,254712345678,256712345678,255712345678,250712345678"

# ==============================================
# DEPRECATED/REMOVED CONFIGURATIONS
# ==============================================
# The following configurations have been REMOVED as we're now using PawaPay exclusively:
# - All JENGA_* variables (Jenga API configuration)
# - All ESCROW_* variables (Escrow payment configuration)
# - ENABLE_ESCROW_PAYMENTS, ENABLE_P2P_ESCROW, etc.
#
# PawaPay provides all payment functionalities we need:
# ✅ Mobile money deposits
# ✅ Payouts
# ✅ Refunds
# ✅ Multi-currency support
# ✅ Bulk operations
# ✅ Real-time callbacks
# ✅ Payment widgets
# ✅ Transaction status checking
# ✅ Comprehensive African mobile money coverage

# ==============================================
# PRODUCTION OVERRIDES
# ==============================================
# When deploying to production, ensure you update:
# - NODE_ENV=production
# - PAWAPAY_ENVIRONMENT=production
# - PAWAPAY_BASE_URL=https://api.pawapay.io
# - All API keys and secrets to production values
# - Enable HTTPS enforcement
# - Set LOG_SENSITIVE_DATA=false
# - Configure proper CORS origins
# - Set up proper SSL certificates
# - Configure production webhook URLs